@model TamaWebApp.TamaService.Tamagotchi

<div class="row">
    <div class="box background">
        <div class="text-center">
            <div id="tamaName" class="intro-text">
                @Html.DisplayFor(model => model.Name)
            </div>
            <img id="TamaImg">
            <div id="DeathText" class="deathText" hidden>
                <p><strong>RIP</strong></p>
                <p>@Model.Name</p>
            </div>
        </div>
        <br />
        <div class="tamaStatus text-center">
            <strong id="statusText"></strong>
        </div>
    </div>
</div>

<script>
    function GetState(inputid) {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetStatus", "Tamagotchi")',
            data: { id: inputid },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            async: false,
            success: function (msg) {
                if (msg.status == "Dead") {
                    $("#TamaImg").attr("src", "/Content/img/sprites/Dead.png");
                    document.getElementById("DeathText").hidden = false;
                    $("#TamaImg").attr("class", "deathImg");

                }
                else if (msg.status == "Sleepy") {
                    $("#TamaImg").attr("src", "/Content/img/sprites/@Model.ImgId/Sleeping.png");
                }
                else {
                    $("#TamaImg").attr("src", "/Content/img/sprites/@Model.ImgId/" + msg.status + ".png");
                }
                $("#statusText").text(msg.status + "!");
            },
            error: function (e) {
                alert(e.status + "fail on img load")
            }
        });
    };
</script>